<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="author" content="전남일자리플랫폼" />
    <meta name="description" content="전남 일자리 박람회" />
    <meta
      name="keywords"
      content="취업, 일자리, 취업박람회, 조선, 해양, 전남 일자리플랫폼, 전남, 해양산업 일자리, 전남 무안"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>전남일자리플랫폼</title>
    <link rel="stylesheet" href="./index.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>
    <!-- <script src="http://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script> -->
    <main>
      <section>
        <h4 class="title">2022 초광역 조선업 일자리 박람회 사전등록</h3>
        <div class="mb-3">
          <label for="name" class="form-label">성명</label>
          <input
            type="text"
            class="form-control"
            id="name"
            placeholder="성명을 입력해주세요."
          />
        </div>
        <div class="mb-3">
          <div class="form-label">성별</div>
          <div class="form-check form-check-inline">
            <input
              name="gender"
              class="form-check-input"
              type="radio"
              id="male"
              value="남"
              checked=true
            />
            <label class="form-check-label" for="male">남성</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              name="gender"
              class="form-check-input"
              type="radio"
              id="female"
              value="여"
            />
            <label class="form-check-label" for="female">여성</label>
          </div>
        </div>
        <div class="mb-3">
          <label for="birth" class="form-label">생년월일</label>
          <input
            type="text"
            class="form-control"
            id="birth"
            placeholder="생년월일을 입력해주세요. ex)930528"
          />
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">이메일</label>
          <input
            type="text"
            class="form-control"
            id="email"
            placeholder="이메일을 입력해주세요."
          />
        </div>
        <div class="mb-1">
          <label for="address" class="form-label">주소</label>
          <!-- <button class="btn btn-dark mobile-address-search">주소검색</button> -->
          <div class="address-search-container">
            
              <input
                type="text"
                class="form-control"
                id="address"
                placeholder="주소를 입력해주세요."
              />
              <!-- <button class="btn btn-dark address-search">주소검색</button> -->
          </div>
        </div>
        <div class="mb-3">
          <input
            type="text"
            class="form-control"
            id="detail-address"
            placeholder="상세주소를 입력해주세요."
          />
        </div>
        <div class="mb-3">
          <label for="tel" class="form-label">연락처</label>
          <input
            type="text"
            class="form-control"
            id="tel"
            placeholder="연락처를 입력해주세요 ex) 01012345678 (-제외)"
          />
        </div>
        <div class="mb-3">
          <div class="form-label">신입/경력</div>
          <div class="form-check form-check-inline">
            <input
              name="experience"
              class="form-check-input"
              type="radio"
              id="novice"
              value="신입"
              checked=true
            />
            <label class="form-check-label" for="novice">신입</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              name="experience"
              class="form-check-input"
              type="radio"
              id="experienced"
              value="경력"
            />
            <label class="form-check-label" for="experienced">경력</label>
          </div>
        </div>
        <div class="mb-3">
          <div class="form-label">구직상태</div>
          <div class="form-check form-check-inline">
            <input
              name="current_job_state"
              class="form-check-input"
              type="radio"
              id="highschool"
              value="특성화고졸업예정"
              checked=true
            />
            <label class="form-check-label" for="highschool"
              >특성화고 졸업예정</label
            >
          </div>
          <div class="form-check form-check-inline">
            <input
              name="current_job_state"
              class="form-check-input"
              type="radio"
              id="college"
              value="대학졸업예정"
            />
            <label class="form-check-label" for="college">대학졸업 예정</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              name="current_job_state"
              class="form-check-input"
              type="radio"
              id="seeking_job"
              value="구직중"
            />
            <label class="form-check-label" for="seeking_job">구직중</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              name="current_job_state"
              class="form-check-input"
              type="radio"
              id="transfer"
              value="이직예정"
            />
            <label class="form-check-label" for="transfer">이직 예정</label>
          </div>
        </div>
        <div class="mb-3">
          <div class="form-label">희망직무</div>
          <div class="form-check form-check-inline">
            <input
              name="position"
              class="form-check-input"
              type="radio"
              id="weld"
              value="용접"
              checked=true
            />
            <label class="form-check-label" for="weld">용접</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              name="position"
              class="form-check-input"
              type="radio"
              id="paint"
              value="도장"
            />
            <label class="form-check-label" for="paint">도장</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              name="position"
              class="form-check-input"
              type="radio"
              id="design"
              value="의장"
            />
            <label class="form-check-label" for="design">의장</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              name="position"
              class="form-check-input"
              type="radio"
              id="manufacture"
              value="가공"
            />
            <label class="form-check-label" for="manufacture">가공</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              name="position"
              class="form-check-input"
              type="radio"
              id="others"
              value="기타"
            />
            <label class="form-check-label" for="others">기타</label>
          </div>
        </div>
        <div class="mb-3">
          <div class="form-label">참가목적</div>
          <div class="form-check form-check-inline">
            <input
              name="purpose"
              class="form-check-input"
              type="radio"
              id="interview"
              value="현장면접"
              checked=true
            />
            <label class="form-check-label" for="interview">현장면접</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              name="purpose"
              class="form-check-input"
              type="radio"
              id="fair"
              value="박람회참가"
              
            />
            <label class="form-check-label" for="fair">박람회참가</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              name="purpose"
              class="form-check-input"
              type="radio"
              id="tour"
              value="부대행사이용"
            />
            <label class="form-check-label" for="tour">부대행사이용</label>
          </div>
        </div>
        <div class="mb-3">
          <div class="form-label">개인정보수집및이용*</div>
          <div style="display:flex; justify-content:space-between; cursor:pointer">
          <div class="form-check form-check-inline">
            <input
              name="privacy_policy"
              class="form-check-input"
              type="radio"
              id="agree"
              value=""
            />
            <label class="form-check-label" for="agree"
              >동의함 <span style="color: red">(필수)</span></label
            >
          </div>
          <div>
            <a href="https://season-public-resource.s3.ap-northeast-2.amazonaws.com/%EA%B0%9C%EC%9D%B8%EC%A0%95%EB%B3%B4%EC%B7%A8%EA%B8%89%EA%B4%80%EB%A6%AC.pdf" download target="_blank">약관 상세보기</a>
          </div>
        </div>
        </div>
        <div class="submit">
            <button type="button" class="btn btn-primary submit-form">사전등록</button>
        </div>
      </section>
    </main>
  </body>
</html>
<script>
const name = document.getElementById("name");
const gender = Array.from(document.querySelectorAll('input[name="gender"]'));
const birth = document.querySelector("#birth");
const email = document.querySelector("#email");
const address = document.querySelector("#address");
const detail_address = document.querySelector("#detail-address");
const tel = document.querySelector("#tel");
const experience = Array.from(
  document.querySelectorAll('input[name="experience"]')
);
const current_job_state = Array.from(
  document.querySelectorAll('input[name="current_job_state"]')
);
const position = Array.from(
  document.querySelectorAll('input[name="position"]')
);
const purpose = Array.from(document.querySelectorAll('input[name="purpose"]'));
const privacy_policy = document.querySelector('input[name="privacy_policy"]');
const submit_button = document.querySelector(".submit-form");
const REGEX = {
  name: /^[ㄱ-ㅎ|가-힣|a-z|A-Z]+$/,
  gender: /.+/,
  birth: /^[0-9]{2}(0[1-9]|1[0-2])(0[0-9]|1[0-9]|2[0-9]|3[0-1])$/,
  email: /^[a-zA-Z0-9+-_.]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,
  address: /.+/,
  detail_address: /.+/,
  tel: /^010([0-9]{3,4})([0-9]{4})$/,
  experience: /.+/,
  current_job_state: /.+/,
  position: /.+/,
  purpose: /.+/,
  privacy_policy: /.+/,
};
const ALERT_MESSAGE = {
  name: "성명을 입력해주세요.",
  gender: "성별을 체크해주세요.",
  birth:
    "생년월일을 형식에 맞게 입력해주세요. ex) 생년월일이 1993.05.28 인 경우 930528",
  email: "이메일을 형식에 맞게 입력해주세요.",
  address: "주소를 입력해주세요.",
  detail_address: "상세주소를 입력해주세요",
  tel: "연락처를 입력해주세요. ex) 연락처가 010-1234-5678 인 경우 01012345678",
  experience: "신입/경력 여부를 체크해주세요.",
  current_job_state: "구직상태를 체크해주세요.",
  position: "희망직무를 선택해주세요.",
  purpose: "참가목적을 선택해주세요.",
  privacy_policy: "개인정보 수집 및 허용은 필수입니다.",
};

const validateForm = (formData) => {
  for (let key in formData) {
    if (!REGEX[key].test(formData[key])) {
      alert(ALERT_MESSAGE[key]);
      return false;
    }
  }
  return true;
};

let formData = {
  name: name.value,
  gender: gender.find((elem) => elem.checked).value,
  birth: birth.value,
  email: email.value,
  address: address.value,
  detail_address: detail_address.value,
  tel: tel.value,
  experience: experience.find((elem) => elem.checked).value,
  current_job_state: current_job_state.find((elem) => elem.checked).value,
  position: position.find((elem) => elem.checked).value,
  purpose: purpose.find((elem) => elem.checked).value,
  privacy_policy: privacy_policy.value,
};

name.addEventListener("change", (e) => {
  formData = {
    ...formData,
    name: e.target.value,
  };
});

for (let i = 0; i < gender.length; i++) {
  gender[i].addEventListener("change", (e) => {
    formData = {
      ...formData,
      gender: e.target.value,
    };
  });
}

birth.addEventListener("change", (e) => {
  formData = {
    ...formData,
    birth: e.target.value,
  };
});

email.addEventListener("change", (e) => {
  formData = {
    ...formData,
    email: e.target.value,
  };
});

address.addEventListener("change", (e) => {
  formData = {
    ...formData,
    address: e.target.value,
  };
});

detail_address.addEventListener("change", (e) => {
  formData = {
    ...formData,
    detail_address: e.target.value,
  };
});

tel.addEventListener("change", (e) => {
  formData = {
    ...formData,
    tel: e.target.value,
  };
});

for (let i = 0; i < experience.length; i++) {
  experience[i].addEventListener("change", (e) => {
    formData = {
      ...formData,
      experience: e.target.value,
    };
  });
}

for (let i = 0; i < current_job_state.length; i++) {
  current_job_state[i].addEventListener("change", (e) => {
    formData = {
      ...formData,
      current_job_state: e.target.value,
    };
  });
}

for (let i = 0; i < position.length; i++) {
  position[i].addEventListener("change", (e) => {
    formData = {
      ...formData,
      position: e.target.value,
    };
  });
}

for (let i = 0; i < purpose.length; i++) {
  purpose[i].addEventListener("change", (e) => {
    formData = {
      ...formData,
      purpose: e.target.value,
    };
  });
}

privacy_policy.addEventListener("change", (e) => {
  formData = {
    ...formData,
    privacy_policy: "동의",
  };
});

const openAddressFinder = () => {
  new window.daum.Postcode({
    oncomplete: (data) => {
      address.value = `${data.address} (${data.zonecode})`;
      formData = {
        ...formData,
        address: `${data.address} (${data.zonecode})`,
      };
    },
  }).open();
};


// });
// 사전등록 버튼 클릭 시 폼 전송
submit_button.addEventListener("click", () => {
  console.log("dd");
  if (validateForm(formData)) {
    fetch("https://api.season.ne.kr/api/jobfair/reservation", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(formData),
    })
      .then((res) => {
        if (res.status === 200 || res.status === 201) {
          alert("사전등록이 완료되었습니다.");
          name.value = "";
          gender[0].checked;
          birth.value = "";
          email.value = "";
          address.value = "";
          detail_address.value = "";
          tel.value = "";
          experience[0].checked = true;
          current_job_state[0].checked = true;
          position[0].checked = true;
          purpose[0].checked = true;
          privacy_policy.checked = false;
          formData = {
            ...formData,
            name: "",
            gender: gender.find((elem) => elem.checked).value,
            birth: "",
            email: "",
            address: "",
            detail_address: "",
            tel: "",
            experience: experience.find((elem) => elem.checked).value,
            current_job_state: current_job_state.find((elem) => elem.checked)
              .value,
            position: position.find((elem) => elem.checked).value,
            purpose: purpose.find((elem) => elem.checked).value,
            privacy_policy: privacy_policy.value,
          };
          console.log(formData);
        } else {
          alert("에러가 발생하였습니다. 다시 한번 등록하시길 바랍니다.");
        }
      })
      .catch((e) => {
        alert("에러가 발생하였습니다. 다시 한번 등록하시길 바랍니다.");
        console.log(e.message);
      });
  }
});


</script>
<style>

* {
  box-sizing: border-box;
}

a {
  text-decoration: none;
}

body {
  padding: 0;
  padding: 0;
}

section {
  max-width: 40rem;
  padding: 2rem;
  margin: 0 auto;
}

h4 {
  margin: 0;
  padding: 0;
}

.title {
  display: flex;
  justify-content: center;
  align-items: center;
}

.address-search-container {
  display: flex;
}

.mobile-address-search {
  display: none !important;
}

.address-search {
  min-width: 10rem;
}

.submit {
  display: flex;
  justify-content: center;
  align-items: center;
}

@media (max-width: 500px) {
  html {
    font-size: 13px;
  }

  section {
    max-width: 30rem;
  }

  .mobile-address-search {
    font-size: 12px !important;
    min-width: 5rem;
    display: inline-block !important;
    margin-bottom: 3px;
  }

  .address-search {
    display: none !important;
  }

  .submit-form {
    font-size: 12px !important;
  }

  .title {
    font-size: 1.1rem;
  }
}

</style>